from google import genai                
from flask import Flask, request, jsonify, render_template

# Initialize the GenAI client
# Replace with your actual API key
client = genai.Client(api_key="AIzaSyAcC-TJKPrQnriA14DlViuSfClRZknWR3w")
app = Flask(__name__)

@app.route('/')
def home():
    # Looks for 'index.html' inside a folder named 'templates'
    return render_template('index.html')

@app.route("/chat", methods=['POST'])
def chat():
    data = request.get_json()
    prompt = data.get("message")
    
    try:
        # Using the latest Gemini 3 Flash model for 2025
        response = client.models.generate_content(
            model="gemini-3-flash-preview", 
            contents=prompt
        )
        return jsonify({"reply": response.text})
    except Exception as e:
        print(f"Error calling Gemini API: {e}")
        return jsonify({"reply": "I'm having trouble thinking. Please try again later."}), 500

if __name__ == '__main__':
    app.run(port=8000, debug=True)